<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Button Lab üöÄ</title>
<style>
body {
  margin:0;
  font-family:Arial,sans-serif;
  background:#111;
  color:white;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:flex-start;
  min-height:100vh;
}
h1 { margin:20px 0; font-size:2.5rem; }
.coins { font-size:1.5rem; margin-bottom:20px; }
.button-row { display:flex; flex-wrap:wrap; justify-content:center; margin:10px 0; gap:10px; }
button {
  padding:15px 30px; font-size:1.2rem; border:none; border-radius:50px; cursor:pointer;
  color:white; background:linear-gradient(90deg,#ff00cc,#3333ff); transition:0.3s; position:relative;
}
button:hover { transform:scale(1.1); }
#settingsModal,#shopModal{display:none;position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);
background:#222;padding:30px;border-radius:15px;box-shadow:0 0 30px #00ffff;}
#settingsModal button,#shopModal button{margin-top:15px;}
#gameSection{display:none; flex-direction:column; align-items:center; gap:10px;}
</style>
</head>
<body>

<h1>üöÄ Button Lab</h1>
<div class="coins">üí∞ Coins: <span id="coins">0</span></div>

<div class="button-row" id="mainButtons">
  <button id="playBtn">Play</button>
  <button id="settingsBtn">Settings</button>
  <button id="launchBtn">Launch</button>
  <button id="surpriseBtn">Surprise</button>
  <button id="colorBurstBtn">Color Burst</button>
  <button id="confettiBtn">Confetti</button>
  <button id="shopBtn">Shop</button>
  <button id="saveBtn">üíæ Save</button>
  <button id="resetSaveBtn">‚ö†Ô∏è Reset Save</button>
</div>

<!-- Game Section -->
<div id="gameSection">
  <div id="gameCoins">Coins: 0</div>
  <button id="gameClickBtn">Click Me!</button>
  <button id="gameBackBtn">‚¨Ö Back</button>
</div>

<!-- Settings Modal -->
<div id="settingsModal">
  <h2>Settings</h2>
  <label>Background Color: <input type="color" id="bgColorPicker" value="#111111"></label>
  <br>
  <button id="closeSettings">Close</button>
</div>

<!-- Shop Modal -->
<div id="shopModal">
  <h2>Shop</h2>
  <div id="shopItems"></div>
  <button id="closeShop">Close</button>
</div>

<script>
// ---- Persistent Data ----
let coins = parseInt(localStorage.getItem('coins')) || 0;
let purchasedButtons = JSON.parse(localStorage.getItem('purchasedButtons')) || [];
let autoClickers = parseInt(localStorage.getItem('autoClickers')) || 0;
let coinMultiplier = parseInt(localStorage.getItem('coinMultiplier')) || 1;
let bgColor = localStorage.getItem('bgColor') || '#111111';
let buttonsBought = parseInt(localStorage.getItem('buttonsBought')) || 0;

// Dynamic shop prices
let autoClickerPrice = parseInt(localStorage.getItem('autoClickerPrice')) || 50;
let multiplierPrice = parseInt(localStorage.getItem('multiplierPrice')) || 30;

// Initialize
document.body.style.background = bgColor;
updateCoins();

// ---- Functions ----
function updateCoins(){
  document.getElementById('coins').textContent = coins;
  document.getElementById('gameCoins').textContent = `Coins: ${coins}`;
}

function addButtonToPage(name){
  const newBtn = document.createElement('button');
  newBtn.textContent = name;
  newBtn.style.background = `hsl(${Math.random()*360},80%,60%)`;
  newBtn.addEventListener('click', ()=> alert(`You pressed ${name}!`));
  document.body.appendChild(newBtn);
}

// Restore AI/previous buttons
purchasedButtons.forEach(btn=>addButtonToPage(btn));

function startAutoClickers(){
  if(autoClickers>0){
    setInterval(()=>{
      coins += autoClickers*coinMultiplier;
      updateCoins();
    },1000);
  }
}
startAutoClickers();

// ---- Play Game ----
const playBtn = document.getElementById('playBtn');
const mainButtons = document.getElementById('mainButtons');
const gameSection = document.getElementById('gameSection');
playBtn.addEventListener('click',()=>{
  mainButtons.style.display='none';
  gameSection.style.display='flex';
});

document.getElementById('gameClickBtn').addEventListener('click',()=>{
  coins += coinMultiplier;
  updateCoins();
  localStorage.setItem('coins',coins);
});

document.getElementById('gameBackBtn').addEventListener('click',()=>{
  gameSection.style.display='none';
  mainButtons.style.display='flex';
});

// ---- Settings ----
const settingsModal = document.getElementById('settingsModal');
document.getElementById('settingsBtn').addEventListener('click',()=>settingsModal.style.display='block');
document.getElementById('closeSettings').addEventListener('click',()=>settingsModal.style.display='none');
document.getElementById('bgColorPicker').addEventListener('input',e=>{
  bgColor = e.target.value;
  document.body.style.background = bgColor;
});

// ---- Launch ----
document.getElementById('launchBtn').addEventListener('click',()=>window.location.href='launch.html');

// ---- Fun Buttons ----
const emojis=['üéâ','ü™ê','üí•','‚ú®','üî•','üåà','üöÄ','üõ∏','ü™Ñ','‚ö°','üç≠','üé∂','üíé','üåü','üí£'];
document.getElementById('surpriseBtn').addEventListener('click',()=>alert(`Surprise! ${emojis[Math.floor(Math.random()*emojis.length)]}`));
document.getElementById('colorBurstBtn').addEventListener('click',()=>{
  document.querySelectorAll('button').forEach(btn=>{
    const r=Math.floor(Math.random()*256),g=Math.floor(Math.random()*256),b=Math.floor(Math.random()*256);
    btn.style.background=`rgb(${r},${g},${b})`;
  });
});
document.getElementById('confettiBtn').addEventListener('click',()=>{
  for(let i=0;i<50;i++){
    const conf=document.createElement('div');
    conf.style.position='fixed';
    conf.style.top='0';
    conf.style.left=Math.random()*100+'vw';
    conf.style.width=conf.style.height='10px';
    conf.style.background=`hsl(${Math.random()*360},80%,60%)`;
    conf.style.opacity=0.7;
    conf.style.animation='fall 3s linear forwards';
    document.body.appendChild(conf);
    setTimeout(()=>document.body.removeChild(conf),3000);
  }
});

// ---- Shop ----
const shopModal = document.getElementById('shopModal');
const shopItemsDiv = document.getElementById('shopItems');
document.getElementById('shopBtn').addEventListener('click',()=>shopModal.style.display='block');
document.getElementById('closeShop').addEventListener('click',()=>shopModal.style.display='none');

function createShopButton(name, cost, type){
  const btn = document.createElement('button');
  btn.textContent = `${name} (Cost: ${cost})`;
  btn.addEventListener('click',()=>{
    if(coins >= cost){
      coins -= cost;
      updateCoins();
      if(type==='button'){
        purchasedButtons.push(name);
        addButtonToPage(name);
        buttonsBought++;
        localStorage.setItem('buttonsBought',buttonsBought);
        localStorage.setItem('purchasedButtons',JSON.stringify(purchasedButtons));
      } else if(type==='auto'){
        autoClickers++;
        localStorage.setItem('autoClickers',autoClickers);
        startAutoClickers();
        alert(`You now have ${autoClickers} Auto-Clicker(s)!`);
        autoClickerPrice = Math.floor(autoClickerPrice * 1.5);
        localStorage.setItem('autoClickerPrice', autoClickerPrice);
      } else if(type==='multiplier'){
        coinMultiplier++;
        localStorage.setItem('coinMultiplier',coinMultiplier);
        alert(`Coin multiplier increased! Each click now gives ${coinMultiplier} coin(s).`);
        multiplierPrice = Math.floor(multiplierPrice * 1.5);
        localStorage.setItem('multiplierPrice', multiplierPrice);
      }

      // AI Assistant: every 3 purchased buttons, add 3 new ones
      if(buttonsBought > 0 && buttonsBought % 3 === 0 && type==='button'){
        for(let i=0;i<3;i++){
          const aiBtnName = `AI Button ${Date.now()+i}`;
          purchasedButtons.push(aiBtnName);
          addButtonToPage(aiBtnName);
        }
        localStorage.setItem('purchasedButtons',JSON.stringify(purchasedButtons));
        alert("ü§ñ AI Assistant activated! Added 3 extra buttons!");
      }
    } else alert("Not enough coins!");
  });
  shopItemsDiv.appendChild(btn);
}

// Add items
createShopButton('Fun Button', 10, 'button');
createShopButton('Starter Button: Play', 5, 'button');
createShopButton('Starter Button: Surprise', 5, 'button');
createShopButton('Auto-Clicker', autoClickerPrice, 'auto');
createShopButton('Coin Upgrade +1', multiplierPrice, 'multiplier');

// ---- Save / Reset ----
document.getElementById('saveBtn').addEventListener('click',()=>{
  localStorage.setItem('coins',coins);
  localStorage.setItem('purchasedButtons',JSON.stringify(purchasedButtons));
  localStorage.setItem('autoClickers',autoClickers);
  localStorage.setItem('coinMultiplier',coinMultiplier);
  localStorage.setItem('bgColor',bgColor);
  localStorage.setItem('buttonsBought',buttonsBought);
  localStorage.setItem('autoClickerPrice',autoClickerPrice);
  localStorage.setItem('multiplierPrice',multiplierPrice);
  alert("Game Saved! üíæ");
});
document.getElementById('resetSaveBtn').addEventListener('click',()=>{
  if(confirm("Are you sure you want to reset your save?")){
    coins=0; purchasedButtons=[]; autoClickers=0; coinMultiplier=1; bgColor='#111111';
    buttonsBought=0; autoClickerPrice=50; multiplierPrice=30;
    localStorage.clear();
    updateCoins();
    document.body.style.background=bgColor;
    alert("Save Reset! ‚ö†Ô∏è");
    location.reload();
  }
});
</script>
</body>
</html>
